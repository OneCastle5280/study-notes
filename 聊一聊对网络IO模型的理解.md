## 简单聊一聊对网络 I/O 模型的理解
### 1. 前言
刚开始我对网络 i/o 模型的理解很模糊，很难捋清各种 i/o 模型之间的区别；因为最近在学习 rpc 框架的底层工作原理，其中网络通讯模块涉及到了 i/o 模型相关的知识；
然后我发现我对网络i/o模型这一块知识并不是那么了解。经过几天的学习和朋友的讨论，对网络 i/o 模型有了一定的理解。

### 2. I/O 操作与操作系统的关系
首先，我想先简单聊聊程序在进行 I/O 操作的时候，跟操作系统之间的交互是怎么样的。

I/O 根据是否发生了网络传输区分为本地 I/O 和网络 I/O ；本地 I/O 就是程序在本机进行文件读取和生成，网络 I/O 则是程序通过机器的网络设备（例如网卡）进行文件流传输；无论是
本地 I/O 还是网络 I/O 程序都需要借助操作系统的力量，需要操作系统调度切换到内核态才能执行相应的一些命令，例如：从磁盘中读取指定文件字节流/往磁盘文件写入字节流；将字节流通过网卡发送到网络中
。这些都只有内核态才能执行的能力；所以我们程序进行 I/O 操作，一定会涉及到用户态/内核态的切换。
### 3. 发生 I/O 操作时，程序与操作系统的交互流程
不一样的 I/O 模型可能会有不一样的操作流程，先简单捋一捋不同的 I/O 模型；

1. 根据对 I/O 操作的结果是同步还是异步返回，我们可以将 I/O 划分成同步 I/O 和异步 I/O。
2. 根据在 I/O 操作时，程序是阻塞还是非阻塞的，我们可以将 I/O 划分成阻塞 I/O 和非阻塞 I/O。

两两组合，可以得到四种结果：同步阻塞I/O、同步非阻塞I/O、异步阻塞I/O、异步非阻塞I/O

#### 3.1 同步阻塞 I/O
程序要进行 I/O 操作时，我们上面说到，需要操作系统切换内核态才能对文件进行读/写的操作，操作系统提供了特殊的 API，这个特殊的 API 能够使得操作系统对文件进行读/写的操作。

例如：程序需要对文件进行读取，需要调用操作系统的 read() 方法，此时操作系统会切换到内核态，调用硬件能力，将文件内容从磁盘读取到内核缓冲区，然后通过 CPU 将内核缓冲区的数据拷贝到用户态；然后再从内核态切回用户态。
这样程序就完成了对文件的读取操作。这里涉及到几个步骤：
1. 程序调用 read() 通知操作系统我们需要对文件进行读取
2. 操作系统从用户态转化成